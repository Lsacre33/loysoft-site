<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ã€ propos de LoySoft</title>
  <style>
    * { margin:0; padding:0; box-sizing:border-box; font-family:'Arial',sans-serif; }
    body {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      min-height: 100vh;
      overflow: auto;
      background: #fafafa;
    }
    nav { display:flex; align-items:center; justify-content:space-between; width:100%; padding:10px 5vw; background:#f5f5f5;
      box-shadow:0 2px 5px rgba(0,0,0,.1);
    }
    nav .brand { display:flex; align-items:center; }
    nav .brand img { width:45px; height:45px; margin-right:8px; }
    nav .brand h1 { font-size:1.4rem; color:#333; }
    .nav-btn { font-size:1.8rem; cursor:pointer; }

    /* Navigation drawer */
    #navDrawer { position:fixed; top:0; left:-250px; width:200px; height:100%; background:#fff;
      box-shadow:2px 0 5px rgba(0,0,0,.2); transition:left .3s; padding-top:60px; z-index:600;
    }
    #navDrawer.show { left:0; }
    #navDrawer a { display:block; padding:12px 20px; font-size:1rem; color:#333; text-decoration: none; }
    #navDrawer a.active { background:#3498db; color:#fff; }

    /* Slogan */
    .slogan {
      position: absolute;
      top: 10px;
      left: 0;
      width: 100%;
      white-space: nowrap;
      overflow: hidden;
      animation: slide 15s linear infinite;
      font-size: 1.2rem;
      color: #3498db;
      z-index: 500;
    }
    @keyframes slide {
      0% { transform: translateX(100%); }
      100% { transform: translateX(-100%); }
    }

    /* Centered Contact Form */
    .contact-form {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin: 80px 0;
      width: 90%;
      max-width: 400px;
      text-align: center;
      background: #fff;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    .contact-form h2 {
      margin-bottom: 20px;
    }
    .contact-form input,
    .contact-form textarea {
      width: 100%;
      padding: 10px;
      margin-bottom: 5px;
      border: 1px solid #ddd;
      border-radius: 5px;
      font-size: 1rem;
    }
    .contact-form button {
      padding: 10px;
      background-color: #27ae60;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 1rem;
      transition: background-color 0.3s;
      margin-top: 10px;
    }
    .contact-form button:hover {
      background-color: #219150;
    }

    /* Inline Error Messages */
    .error-message {
      color: red;
      font-size: 0.9rem;
      display: none;
      margin-bottom: 10px;
      text-align: left;
      width: 100%;
    }

    /* Emoji animation */
    .emoji {
      font-size: 2rem;
      animation: bounce 0.5s infinite alternate;
    }
    @keyframes bounce {
      0% { transform: translateY(0); }
      100% { transform: translateY(-10px); }
    }

    /* SOS Button */
    #sosBtn {
      margin: 20px 0 40px;
      padding: 12px 20px;
      font-size: 1.1rem;
      background: #e74c3c;
      color: #fff;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      box-shadow: 0 2px 5px rgba(0,0,0,0.2);
      transition: transform 0.2s;
    }
    #sosBtn:hover { transform: scale(1.05); }

    /* Modal Overlay */
    .modal-overlay {
      position: fixed;
      top:0; left:0; width:100%; height:100%;
      background: rgba(0,0,0,0.6);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 1000;
    }
    .modal {
      background: #1a1a1a;
      color: #f1f1f1;
      padding: 20px;
      border-radius: 8px;
      width: 90%;
      max-width: 400px;
      position: relative;
      box-shadow: 0 2px 10px rgba(0,0,0,0.5);
    }
    .modal h3 { margin-bottom: 15px; text-align: center; }
    .modal input, .modal select {
      width: 100%;
      padding: 8px;
      margin-bottom: 10px;
      border: none;
      border-radius: 4px;
    }
    .modal .btn {
      width: 100%;
      padding: 10px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 1rem;
    }
    .modal .btn-validate {
      background: #27ae60;
      color: #fff;
    }
    .modal .btn-validate:hover {
      background: #219150;
    }
    .modal .close-modal {
      position: absolute;
      top: 10px; right: 12px;
      font-size: 1.2rem;
      cursor: pointer;
    }
    .modal .error-sos {
      color: #e74c3c;
      font-size: 0.9rem;
      display: none;
      margin-bottom: 10px;
    }
    .modal .tarif-group {
      margin-bottom: 10px;
    }

    @media(max-width:668px){ .hero .card{ width:calc(50% - 20px);} }
    @media(max-width:380px){ .hero .card{ width:100%;} nav{flex-direction:row;align-items:center;} }
  </style>
</head>
<body>
  <nav>
    <div class="brand">
      <img src="/loysoft-site/LoySoft.png" alt="Logo LoySoft">
      <h1>LoySoft</h1>
    </div>
    <span class="nav-btn" id="navBtn">â˜°</span>
  </nav>

  <div class="slogan">
    <span>Vos services numÃ©riques Ã  la demande ðŸš€</span>
  </div>

  <div id="navDrawer">
    <a href="accueil.html">Accueil & Services</a>
    <a href="about.html">Ã€ propos de LoySoft</a>
    <a href="story.html">Historique</a>
    <a href="contact.html" class="active">Contact</a>
  </div>

  <!-- Contact Form -->
  <div class="contact-form">
    <div class="emoji">ðŸ˜Š</div>
    <h2>Contactez-nous 24H/24</h2>
    <input type="text" id="fullName" placeholder="Ex: Jean N'Talala" pattern="[A-Za-z '\u00C0-\u017F]+" required>
    <div class="error-message" id="nameError">Format invalide.</div>
    <textarea id="message" placeholder="Votre message (max 1000 caractÃ¨res)" maxlength="1000" required></textarea>
    <div class="error-message" id="msgError">Veuillez entrer un message (max 1000 caractÃ¨res).</div>
    <button id="contactBtn">Contacter</button>
  </div>

  <!-- SOS Button -->
  <button id="sosBtn">SOS</button>

  <!-- SOS Modal -->
  <div class="modal-overlay" id="sosOverlay">
    <div class="modal" id="sosModal">
      <span class="close-modal" id="closeSosModal">âœ•</span>
      <h3>Code passe SOS</h3>
      <input type="password" id="sosCode" placeholder="Entrez le code">
      <div class="error-sos" id="codeError">Code passe incorrect.</div>
      <button class="btn btn-validate" id="validateCode">Valider</button>
      <!-- Formulaire SOS Projet (cachÃ© tant que code invalide) -->
      <div id="sosForm" style="display:none; margin-top:15px;">
        <h3>Formulaire SOS Projet</h3>
        <input type="text" id="sosName" placeholder="Nom complet" pattern="[A-Za-z '\u00C0-\u017F]+" required>
        <div class="error-sos" id="sosNameError">Nom invalide.</div>
        <select id="sosPromo" required>
          <option value="">-- Choisissez promotion --</option>
          <option value="L1">L1 LMD</option>
          <option value="L2">L2 LMD</option>
          <option value="L3">L3 LMD</option>
        </select>
        <div class="tarif-group" id="tarifOptions"></div>
        <div class="error-sos" id="sosFormError">Veuillez remplir tous les champs.</div>
        <button class="btn btn-validate" id="sendSos">Contactez SOS</button>
      </div>
    </div>
  </div>

  <script>
    // Navigation drawer logic
    const navBtn = document.getElementById('navBtn');
    const navDrawer = document.getElementById('navDrawer');
    navBtn.addEventListener('click', e => {
      navDrawer.classList.toggle('show');
      e.stopPropagation();
    });
    document.addEventListener('click', e => {
      if (navDrawer.classList.contains('show') && !navDrawer.contains(e.target) && e.target !== navBtn) {
        navDrawer.classList.remove('show');
      }
    });

    // Contact form logic
    const fullNameInput = document.getElementById('fullName');
    const nameError = document.getElementById('nameError');
    const messageInput = document.getElementById('message');
    const msgError = document.getElementById('msgError');
    fullNameInput.addEventListener('input', () => {
      nameError.style.display = fullNameInput.validity.patternMismatch ? 'block' : 'none';
    });
    messageInput.addEventListener('input', () => {
      msgError.style.display = !messageInput.value.trim() ? 'block' : 'none';
    });
    document.getElementById('contactBtn').addEventListener('click', () => {
      const fullName = fullNameInput.value.trim();
      const message = messageInput.value.trim();
      let valid = true;
      if (!fullName || fullNameInput.validity.patternMismatch) {
        nameError.style.display = 'block'; valid = false;
      }
      if (!message) {
        msgError.style.display = 'block'; valid = false;
      }
      if (!valid) return;
      const whatsappText = `Bonjour LoySoft moi c'est: ${fullName} et mon message est: ${message}`;
      window.open(`https://wa.me/243844224165?text=${encodeURIComponent(whatsappText)}`, '_blank');
    });

    // SOS modal logic
    const sosBtn = document.getElementById('sosBtn');
    const sosOverlay = document.getElementById('sosOverlay');
    const closeSosModal = document.getElementById('closeSosModal');
    sosBtn.onclick = () => { sosOverlay.style.display = 'flex'; };
    closeSosModal.onclick = () => { sosOverlay.style.display = 'none'; resetSos(); };

    // Code passe validation
    document.getElementById('validateCode').addEventListener('click', () => {
      const code = document.getElementById('sosCode').value.trim();
      const codeError = document.getElementById('codeError');
      if (code.toLowerCase() !== 'projet') {
        codeError.style.display = 'block';
      } else {
        codeError.style.display = 'none';
        document.getElementById('sosForm').style.display = 'block';
      }
    });

    // Affichage tarifs selon promo
    const promoSelect = document.getElementById('sosPromo');
    const tarifGroup = document.getElementById('tarifOptions');
    promoSelect.addEventListener('change', () => {
      tarifGroup.innerHTML = '';
      const promo = promoSelect.value;
      let options = [];
      if (promo === 'L1') {
        options = [
          { label:'Projet 1 mois 15j â€“ 20$', value:'1' },
          { label:'Express 2 sem â€“ 30$', value:'2' }
        ];
      } else if (promo === 'L2') {
        options = [
          { label:'Projet 1 mois 15j â€“ 30$', value:'1' },
          { label:'Express 2 sem â€“ 40$', value:'2' }
        ];
      } else if (promo === 'L3') {
        options = [
          { label:'Projet 1 mois 15j â€“ 30$', value:'1' },
          { label:'Express 2 sem â€“ 40$', value:'2' }
        ];
      }
      options.forEach(opt => {
        const r = document.createElement('div');
        r.innerHTML = `<label><input type="radio" name="tarif" value="${opt.label}"> ${opt.label}</label>`;
        tarifGroup.appendChild(r);
      });
    });

    // Envoi SOS
    document.getElementById('sendSos').addEventListener('click', () => {
      const name = document.getElementById('sosName');
      const promo = promoSelect;
      const tarif = document.querySelector('input[name="tarif"]:checked');
      const errName = document.getElementById('sosNameError');
      const errForm = document.getElementById('sosFormError');
      let ok = true;
      errName.style.display = name.validity.patternMismatch || !name.value.trim() ? 'block':'none';
      if (!name.value.trim() || name.validity.patternMismatch) ok = false;
      if (!promo.value) ok = false;
      if (!tarif) ok = false;
      if (!ok) {
        errForm.style.display = 'block';
        return;
      }
      const text = `SOS Projet:\nNom: ${name.value}\nPromotion: ${promo.value}\nOption: ${tarif.value}`;
      window.open(`https://wa.me/243844224165?text=${encodeURIComponent(text)}`, '_blank');
    });

    function resetSos(){
      document.getElementById('sosCode').value = '';
      document.getElementById('codeError').style.display = 'none';
      document.getElementById('sosForm').style.display = 'none';
      document.getElementById('sosName').value = '';
      document.getElementById('sosNameError').style.display = 'none';
      document.getElementById('sosPromo').value = '';
      document.getElementById('tarifOptions').innerHTML = '';
      document.getElementById('sosFormError').style.display = 'none';
    }
  </script>
</body>
</html>
